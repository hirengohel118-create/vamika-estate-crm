<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vamika Estate CRM</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="app-icon-192.png">
<meta name="theme-color" content="#071127">

<style>
:root{
  --bg:#071127;
  --card:#0f1b2b;
  --text:#E6EEF8;
  --muted:#9fb0c8;
  --accent:#3B82F6;
  --accent2:#60a5fa;
}
:root.light{
  --bg:#f7fafc;
  --card:#ffffff;
  --text:#071127;
  --muted:#6b7280;
  --accent:#3B82F6;
  --accent2:#60a5fa;
}
*{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
body{
  margin:0;
  background:linear-gradient(180deg,var(--bg),#071b36);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}
#app{max-width:960px;margin:10px auto;padding:0 10px;}

/* HEADER CARD */
.header-card{
  display:flex;
  align-items:center;
  gap:14px;
  background:linear-gradient(90deg, rgba(59,130,246,0.10), rgba(96,165,250,0.04));
  padding:18px;
  border-radius:16px;
  margin:8px 0;
  border:1px solid rgba(255,255,255,0.04);
  backdrop-filter: blur(6px);
}
.logo-wrap{
  width:64px;
  height:64px;
  border-radius:12px;
  background:linear-gradient(180deg, rgba(59,130,246,0.18), rgba(59,130,246,0.06));
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 6px 20px rgba(59,130,246,0.06);
}
.logo-wrap img{
  width:56px;
  height:56px;
  border-radius:10px;
  object-fit:cover;
}
.header-info{flex:1;}
.biz-name{font-weight:900;font-size:20px;line-height:1;color:var(--text);}
.estate{display:block;color:var(--accent2);}
.owner{color:var(--muted);font-size:13px;margin-top:6px;}
.header-action{display:flex;align-items:center;gap:8px;}

/* TABS */
.tabs{
  display:flex;
  gap:10px;
  padding:14px 6px;
  flex-wrap:wrap;
}
.tab{
  background:transparent;
  border-radius:999px;
  padding:9px 14px;
  border:1px solid transparent;
  color:var(--muted);
  cursor:pointer;
  font-weight:700;
}
.tab.active{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#fff;
  box-shadow:0 10px 30px rgba(59,130,246,0.14);
}
.badge{
  display:inline-block;margin-left:8px;padding:4px 9px;border-radius:999px;background:#ef4444;color:#fff;
  font-weight:700;font-size:12px;vertical-align:middle;
}

/* CONTENT BASE */
.content{padding:6px 0 60px 0;}
.top-row{display:flex;gap:10px;align-items:center;margin-bottom:12px;}
#searchLeads{
  flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);
  background:transparent;color:var(--text);outline:none;
}
.primary{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#fff;border:none;padding:10px 16px;border-radius:12px;cursor:pointer;
  box-shadow:0 12px 30px rgba(59,130,246,0.12);font-weight:700;
}

/* CARDS */
.card-list{display:flex;flex-direction:column;gap:10px;}
.lead-card{
  background:var(--card);padding:12px;border-radius:12px;
  border:1px solid rgba(255,255,255,0.02);
  display:flex;flex-direction:column;gap:6px;
}
.lead-row{display:flex;justify-content:space-between;align-items:center;gap:12px;}
.lead-left{display:flex;flex-direction:column;}
.lead-title{font-weight:800;font-size:15px;color:var(--text);}
.lead-meta{color:var(--muted);font-size:13px;line-height:1.3;}
.card-actions{display:flex;gap:8px;}
.small-btn{
  padding:8px 10px;border-radius:10px;border:none;cursor:pointer;
  font-weight:700;font-size:13px;
}
.call{background:linear-gradient(90deg,#2b73f0,#3b82f6);color:#fff;}
.wa{background:linear-gradient(90deg,#06b955,#25d366);color:#fff;}
.edit{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,0.04);}
.delete{background:transparent;color:#ff7b7b;border:1px solid rgba(255,255,255,0.03);}
.lead-details{color:var(--muted);font-size:13px;display:none;padding-top:6px;}
.empty-note{opacity:0.75;margin-top:20px;font-size:15px;color:var(--muted);}

/* RESPONSIVE */
@media (max-width:520px){
  .lead-row{flex-direction:column;align-items:flex-start;}
  .card-actions{width:100%;display:flex;justify-content:space-between;}
}
</style>
</head>
<body>
<div id="app">

  <!-- HEADER -->
  <div class="header-card">
    <div class="logo-wrap">
      <img id="logoImg" src="app-icon-192.png"/>
    </div>
    <div class="header-info">
      <div class="biz-name">Vamika Estate</div>
      <span class="estate">Real Estate</span>
      <div class="owner" id="ownerPhone">7046869462</div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <div class="tab active" data-tab="leadsTab">Leads <span class="badge" id="badge"></span></div>
    <div class="tab" data-tab="projectsTab">Projects</div>
    <div class="tab" data-tab="settingsTab">Settings</div>
  </div>

  <!-- CONTENT -->
  <div class="content">
       <!-- PROJECTS TAB -->
    <div class="tab-content" id="projectsTab">
      <div class="top-row">
        <button class="primary" id="addProjectBtn">+ Add Project</button>
      </div>
      <div id="projectList" class="card-list"></div>
      <div class="empty-note" id="projectsEmpty" style="display:none;">No projects added</div>
    </div>

    <!-- PROJECT MODAL -->
    <div id="projectModal" class="modal" aria-hidden="true" style="display:none;">
      <div class="modal-card" style="max-width:760px;">

        <h3 style="margin-bottom:10px;" id="projectModalTitle">Add Project</h3>

        <!-- BASIC -->
        <div class="form-row">
          <input id="projectName" placeholder="Project Name *" />
          <input id="projectLocation" placeholder="Location" />
        </div>

        <div class="form-row">
          <input id="projectArchitect" placeholder="Architect" />
          <input id="projectLandArea" placeholder="Land Area" />
        </div>

        <div class="form-row">
          <input id="projectUnits" placeholder="Total Units" />
          <input id="projectBlocks" placeholder="Blocks" />
          <input id="projectFloors" placeholder="Floors" />
        </div>

        <!-- BHK SIZE -->
        <textarea id="projectConfig" placeholder="Configurations (each line):&#10;2 BHK - 1200 sq.ft&#10;3 BHK - 1450 sq.ft" style="min-height:80px;"></textarea>

        <!-- DESCRIPTION -->
        <textarea id="projectDescription" placeholder="Project Highlights (each line):&#10;Clubhouse&#10;Temple inside&#10;Corner location" style="min-height:70px;"></textarea>

        <hr style="opacity:0.2;margin:12px 0;">

        <!-- RATES -->
        <h4>Rate Details</h4>
        <div class="form-row">
          <input id="rateBasic" placeholder="Basic Rate e.g. 3500" />
          <select id="rateBasicUnit">
            <option value="">Unit</option>
            <option value="per sq.ft">per sq.ft</option>
            <option value="per sq.yd">per sq.yd</option>
            <option value="flat rate">flat rate</option>
          </select>
        </div>

        <div class="form-row">
          <input id="rateOtherAmount" placeholder="Other Pkg e.g. 250" />
          <select id="rateOtherUnit">
            <option value="">Unit</option>
            <option value="per sq.ft">per sq.ft</option>
            <option value="per sq.yd">per sq.yd</option>
            <option value="flat rate">flat rate</option>
          </select>
        </div>

        <div class="form-row">
          <input id="rateMaintDepositAmount" placeholder="Maint Deposit" />
          <select id="rateMaintDepositUnit">
            <option value="">Unit</option>
            <option value="per sq.ft">per sq.ft</option>
            <option value="per sq.yd">per sq.yd</option>
            <option value="flat rate">flat rate</option>
          </select>
        </div>

        <div class="form-row">
          <input id="rateRunningAmount" placeholder="Running Maint" />
          <select id="rateRunningUnit">
            <option value="">Unit</option>
            <option value="per sq.ft">per sq.ft</option>
            <option value="per sq.yd">per sq.yd</option>
            <option value="flat rate">flat rate</option>
          </select>
        </div>

        <!-- PLC -->
        <h4>PLC Options</h4>
        <label><input type="checkbox" id="chkGarden" /> Garden Facing</label><br>
        <label><input type="checkbox" id="chkRoad" /> Road Facing</label><br><br>

        <div class="form-row">
          <input id="ratePlcGardenAmount" placeholder="Garden PLC Amt" />
          <select id="ratePlcGardenUnit">
            <option value="per sq.ft">per sq.ft</option>
            <option value="per sq.yd">per sq.yd</option>
            <option value="flat rate">flat rate</option>
          </select>
        </div>

        <div class="form-row">
          <input id="ratePlcRoadAmount" placeholder="Road PLC Amt" />
          <select id="ratePlcRoadUnit">
            <option value="per sq.ft">per sq.ft</option>
            <option value="per sq.yd">per sq.yd</option>
            <option value="flat rate">flat rate</option>
          </select>
        </div>

        <!-- FRC -->
        <div class="form-row">
          <input id="rateFrcFrom" placeholder="FRC from floor" />
          <input id="rateFrcValue" placeholder="FRC value" />
        </div>

        <!-- APPROX -->
        <textarea id="approxPrice" placeholder="Approx Box Price e.g. ₹1.85 Cr all inclusive" style="min-height:60px;"></textarea>

        <div class="form-actions">
          <button class="small-btn delete" id="cancelProject">Cancel</button>
          <button class="small-btn call" id="saveProject">Save</button>
        </div>
      </div>
    </div>
    /* =========================
   PROJECT DATA STORAGE
========================= */
let projects = JSON.parse(localStorage.getItem("projects") || "[]");
let editingProjectIndex = null;

function saveProjects(){
  localStorage.setItem("projects", JSON.stringify(projects));
}

function openProjectModal(index = null){
  editingProjectIndex = index;

  const data = index !== null ? projects[index] : {};

  // fill fields
  document.getElementById("projectName").value = data.name || "";
  document.getElementById("projectLocation").value = data.location || "";
  document.getElementById("projectArchitect").value = data.architect || "";
  document.getElementById("projectLandArea").value = data.landArea || "";
  document.getElementById("projectUnits").value = data.units || "";
  document.getElementById("projectBlocks").value = data.blocks || "";
  document.getElementById("projectFloors").value = data.floors || "";
  document.getElementById("projectConfig").value = data.config || "";
  document.getElementById("projectDescription").value = data.desc || "";

  document.getElementById("rateBasic").value = data.basicRate || "";
  document.getElementById("rateBasicUnit").value = data.basicUnit || "";
  document.getElementById("rateOtherAmount").value = data.otherAmount || "";
  document.getElementById("rateOtherUnit").value = data.otherUnit || "";
  document.getElementById("rateMaintDepositAmount").value = data.maintDepAmount || "";
  document.getElementById("rateMaintDepositUnit").value = data.maintDepUnit || "";
  document.getElementById("rateRunningAmount").value = data.runningAmount || "";
  document.getElementById("rateRunningUnit").value = data.runningUnit || "";

  document.getElementById("chkGarden").checked = data.plcGarden || false;
  document.getElementById("chkRoad").checked = data.plcRoad || false;
  document.getElementById("ratePlcGardenAmount").value = data.plcGardenAmt || "";
  document.getElementById("ratePlcGardenUnit").value = data.plcGardenUnit || "";
  document.getElementById("ratePlcRoadAmount").value = data.plcRoadAmt || "";
  document.getElementById("ratePlcRoadUnit").value = data.plcRoadUnit || "";

  document.getElementById("rateFrcFrom").value = data.frcFrom || "";
  document.getElementById("rateFrcValue").value = data.frcValue || "";

  document.getElementById("approxPrice").value = data.approx || "";

  document.getElementById("projectModal").style.display = "flex";
}


/* =========================
   SAVE PROJECT
========================= */
document.getElementById("saveProject").addEventListener("click", () => {
  const obj = {
    name: document.getElementById("projectName").value,
    location: document.getElementById("projectLocation").value,
    architect: document.getElementById("projectArchitect").value,
    landArea: document.getElementById("projectLandArea").value,
    units: document.getElementById("projectUnits").value,
    blocks: document.getElementById("projectBlocks").value,
    floors: document.getElementById("projectFloors").value,
    config: document.getElementById("projectConfig").value,
    desc: document.getElementById("projectDescription").value,

    basicRate: document.getElementById("rateBasic").value,
    basicUnit: document.getElementById("rateBasicUnit").value,
    otherAmount: document.getElementById("rateOtherAmount").value,
    otherUnit: document.getElementById("rateOtherUnit").value,
    maintDepAmount: document.getElementById("rateMaintDepositAmount").value,
    maintDepUnit: document.getElementById("rateMaintDepositUnit").value,
    runningAmount: document.getElementById("rateRunningAmount").value,
    runningUnit: document.getElementById("rateRunningUnit").value,

    plcGarden: document.getElementById("chkGarden").checked,
    plcRoad: document.getElementById("chkRoad").checked,
    plcGardenAmt: document.getElementById("ratePlcGardenAmount").value,
    plcGardenUnit: document.getElementById("ratePlcGardenUnit").value,
    plcRoadAmt: document.getElementById("ratePlcRoadAmount").value,
    plcRoadUnit: document.getElementById("ratePlcRoadUnit").value,

    frcFrom: document.getElementById("rateFrcFrom").value,
    frcValue: document.getElementById("rateFrcValue").value,

    approx: document.getElementById("approxPrice").value,
  };

  if(editingProjectIndex === null){
    projects.unshift(obj);
  } else {
    projects[editingProjectIndex] = obj;
  }

  saveProjects();
  renderProjects();
  document.getElementById("projectModal").style.display = "none";
});


/* =========================
   RENDER PROJECT CARDS
========================= */
function renderProjects(){
  const list = document.getElementById("projectList");
  list.innerHTML = "";

  if(!projects.length){
    document.getElementById("projectsEmpty").style.display="block";
    return;
  }
  document.getElementById("projectsEmpty").style.display="none";

  projects.forEach((p,idx)=>{
    const c = document.createElement("div");
    c.className = "lead-card";

    c.innerHTML = `
      <div class="lead-row">
        <div class="lead-left">
          <div class="lead-title">${p.name}</div>
          <div class="lead-meta">${p.location || ""}</div>
        </div>
        <div class="card-actions">
          <button class="small-btn wa">WA</button>
          <button class="small-btn edit">Edit</button>
          <button class="small-btn delete">Del</button>
        </div>
      </div>
      <div class="lead-details">
        <div>${p.config || ""}</div>
        <div>Basic: ${p.basicRate || ""} ${p.basicUnit || ""}</div>
        <div>Approx: ${p.approx || "-"}</div>
      </div>
    `;

    // toggle view
    c.addEventListener("click", ()=> {
      const d = c.querySelector(".lead-details");
      d.style.display = (d.style.display==="block"?"none":"block");
    });

    // EDIT BUTTON
    c.querySelector(".edit").addEventListener("click", (e)=>{
      e.stopPropagation();
      openProjectModal(idx);
    });

    // DELETE BUTTON
    c.querySelector(".delete").addEventListener("click", (e)=>{
      e.stopPropagation();
      if(confirm("Delete project?")){
        projects.splice(idx,1);
        saveProjects();
        renderProjects();
      }
    });

    // WHATSAPP
    c.querySelector(".wa").addEventListener("click",(e)=>{
      e.stopPropagation();
      const msg = `*${p.name}*\n${p.location}\nBasic: ${p.basicRate} ${p.basicUnit}\nApprox: ${p.approx}`;
      window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
    });

    list.appendChild(c);
  });
}


/* =========================
   BUTTON HANDLERS
========================= */
document.getElementById("addProjectBtn").addEventListener("click", ()=>{
  openProjectModal(null);
});

document.getElementById("cancelProject").addEventListener("click", ()=>{
  document.getElementById("projectModal").style.display = "none";
});
        <!-- SETTINGS TAB -->
    <div class="tab-content" id="settingsTab" style="display:none;">

      <h3 style="margin-bottom:10px;">Business Branding</h3>
      <div class="form-row">
        <input id="bizName" placeholder="Business Name" />
        <input id="ownerName" placeholder="Owner Name" />
      </div>

      <div class="form-row">
        <input id="ownerPhoneInput" placeholder="Contact Number" />
        <input id="accentColor" placeholder="Accent Color Hex (#3B82F6)" />
      </div>

      <div class="form-actions">
        <button class="primary" id="saveProfile">Save Profile</button>
      </div>

      <hr style="opacity:0.3;margin:20px 0;">

      <h3>Logo Upload</h3>
      <input type="file" id="uploadLogo" accept="image/*" style="padding:10px;border-radius:10px;background:#fff;color:#000;">

      <hr style="opacity:0.3;margin:20px 0;">

      <h3>Backup Data</h3>
      <button class="primary" id="downloadBackup" style="margin-bottom:10px;">Download Backup</button>
      <input type="file" id="restoreFile" accept=".json" style="padding:10px;border-radius:10px;background:#fff;color:#000;">

      <hr style="opacity:0.3;margin:20px 0;">

      <div class="empty-note" style="opacity:0.7;">
        Data stored offline inside your device using local storage.
      </div>

    </div><!-- END SETTINGS TAB -->

  </div><!-- END CONTENT -->

</div><!-- END APP -->


<!-- FOOTER -->
<div style="text-align:center;color:#888;padding:10px 0;font-size:12px;">
  © Vamika Estate – Powered by Local CRM
</div>

<!-- END HTML – SCRIPT WILL COME AFTER THIS -->
